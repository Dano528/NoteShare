<!DOCTYPE html>
<html lang="en">

<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Viewer | NoteShare!</title>
    <link rel="stylesheet" href="assets/css/styles.css">
</head>

<body>

    <menu>
        <div id="menubar">
            <p class="utente"><span id="nome_menu"></span></p>
            <ul>
                <li><a href="lezioni.html">Lessons</a></li>
                <li><a href="preferiti.html">Favorites</a></li>
                <li><a href="login.html">Account</a></li>
            </ul>
        </div>

        <div>
            <p id="hamburger">☰</p>
        </div>
    </menu>

    <div>

        <header>
            <a href="index.html">
                <h1>NoteShare!</h1>
            </a>
            <h4 id="titolo-appunto">example</h4> 
        </header>

        <main>
            
            <object data="appunti/Relazione.pdf" type="application/pdf" width="80%" style="height: 80vh;">
                <p>Unable to display the PDF. Try changing browser or <a href="appunti/Relazione.pdf" download>click here to download</a>.</p>
            </object>

            <div style="margin-top: 20px; text-align: center;">
                <button id="add-favorite" style="padding: 10px 20px; font-size: 16px;">⭐ Add to Favorites</button>
            </div>
        </main>

        <footer>
            Created with Love by Daniel, Giovanni, and Loris
        </footer>

    </div>

    <script src="assets/JavaScript/main.js"></script>
    <script>
       
        var noteTitle = document.getElementById("titolo-appunto").innerText;
        var addFavoriteBtn = document.getElementById("add-favorite");

        
        var filePDF = document.querySelector("object").getAttribute("data");

        
        var favorites = JSON.parse(sessionStorage.getItem("preferiti")) || [];

        
        addFavoriteBtn.addEventListener("click", function () {
            var alreadyExists = favorites.some(function (note) {
                return note.titolo === noteTitle;
            });

            if (!alreadyExists) {
                favorites.push({ titolo: noteTitle, file: filePDF });
                sessionStorage.setItem("preferiti", JSON.stringify(favorites));
                alert("Note added to favorites!");
            } else {
                alert("This note is already in favorites!");
            }
        });
    </script>

</body>

</html>
